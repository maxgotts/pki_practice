""" SET UP """

P = 0
Q = 0
e = 0
n = 0
d = 0
def phi(P,Q): return (P-1)*(Q-1)

from random import choice as sample

""" EXTRACT PRIMES """
primes_roto = open("primes_mod.txt", "r")
primes_pre = []
for line in primes_roto:primes = line
primes_pre = line.split("/")
del primes_pre[-1]
primes = list(map(lambda x: int(x),primes_pre))
#print(primes)

""" GENERATE PUBLIC & PRIVATE KEY """
P = sample(primes)
Q = sample(primes)
print((P,Q))
n = P*Q
e = sample(range(1,phi(P,Q)))
d = (2*phi(P,Q)+1)/float(e)
print((n,e,d))

""" ALPHABET DICTIONARIES """
alphabet = {'a': '0∆', 'b': '1∆', 'c': '2∆', 'd': '3∆', 'e': '4∆', 'f': '5∆', 'g': '6∆', 'h': '7∆', 'i': '8∆', 'j': '9∆', 'k': '10∆', 'l': '11∆', 'm': '12∆', 'n': '13∆', 'o': '14∆', 'p': '15∆', 'q': '16∆', 'r': '17∆', 's': '18∆', 't': '19∆', 'u': '20∆', 'v': '21∆', 'w': '22∆', 'x': '23∆', 'y': '24∆', 'z': '25∆', 'A': '26∆', 'B': '27∆', 'C': '28∆', 'D': '29∆', 'E': '30∆', 'F': '31∆', 'G': '32∆', 'H': '33∆', 'I': '34∆', 'J': '35∆', 'K': '36∆', 'L': '37∆', 'M': '38∆', 'N': '39∆', 'O': '40∆', 'P': '41∆', 'Q': '42∆', 'R': '43∆', 'S': '44∆', 'T': '45∆', 'U': '46∆', 'V': '47∆', 'W': '48∆', 'X': '49∆', 'Y': '50∆', 'Z': '51∆', '`': '52∆', '~': '53∆', '1': '54∆', '!': '55∆', '2': '56∆', '@': '57∆', '3': '58∆', '£': '59∆', '4': '60∆', '$': '61∆', '5': '62∆', '%': '63∆', '6': '64∆', '^': '65∆', '7': '66∆', '&': '67∆', '8': '68∆', '*': '69∆', '9': '70∆', '(': '71∆', '0': '72∆', ')': '73∆', '-': '74∆', '_': '75∆', '=': '76∆', '+': '77∆', '[': '78∆', '{': '79∆', ']': '80∆', '}': '81∆', '\\': '82∆', '|': '83∆', ';': '84∆', ':': '85∆', "'": '86∆', '"': '87∆', ',': '88∆', '<': '89∆', '.': '90∆', '>': '91∆', '/': '92∆', '?': '93∆', ' ':'94∆'}
reverse_alphabet = {'0∆': 'a', '1∆': 'b', '2∆': 'c', '3∆': 'd', '4∆': 'e', '5∆': 'f', '6∆': 'g', '7∆': 'h', '8∆': 'i', '9∆': 'j', '10∆': 'k', '11∆': 'l', '12∆': 'm', '13∆': 'n', '14∆': 'o', '15∆': 'p', '16∆': 'q', '17∆': 'r', '18∆': 's', '19∆': 't', '20∆': 'u', '21∆': 'v', '22∆': 'w', '23∆': 'x', '24∆': 'y', '25∆': 'z', '26∆': 'A', '27∆': 'B', '28∆': 'C', '29∆': 'D', '30∆': 'E', '31∆': 'F', '32∆': 'G', '33∆': 'H', '34∆': 'I', '35∆': 'J', '36∆': 'K', '37∆': 'L', '38∆': 'M', '39∆': 'N', '40∆': 'O', '41∆': 'P', '42∆': 'Q', '43∆': 'R', '44∆': 'S', '45∆': 'T', '46∆': 'U', '47∆': 'V', '48∆': 'W', '49∆': 'X', '50∆': 'Y', '51∆': 'Z', '52∆': '`', '53∆': '~', '54∆': '1', '55∆': '!', '56∆': '2', '57∆': '@', '58∆': '3', '59∆': '£', '60∆': '4', '61∆': '$', '62∆': '5', '63∆': '%', '64∆': '6', '65∆': '^', '66∆': '7', '67∆': '&', '68∆': '8', '69∆': '*', '70∆': '9', '71∆': '(', '72∆': '0', '73∆': ')', '74∆': '-', '75∆': '_', '76∆': '=', '77∆': '+', '78∆': '[', '79∆': '{', '80∆': ']', '81∆': '}', '82∆': '\\', '83∆': '|', '84∆': ';', '85∆': ':', '86∆': "'", '87∆': '"', '88∆': ',', '89∆': '<', '90∆': '.', '91∆': '>', '92∆': '/', '93∆': '?', '94∆':' '}

""" CONVERT MESSAGE FUNCTIONS """
def convert(message):
	mssagee = ""
	for char in list(message): mssagee += alphabet[char]
	return mssagee
def revert(message):
	mssagee = ""
	split_message = message.split('∆')
	del split_message[-1]
	for char in split_message: mssagee += reverse_alphabet[char+'∆']
	return mssagee

""" ENCODE MESSAGE FUNCTIONS """

m = input("=> ")
print(convert(m))
print(revert(convert(m)))